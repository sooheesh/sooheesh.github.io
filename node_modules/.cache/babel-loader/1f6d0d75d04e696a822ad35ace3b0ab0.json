{"ast":null,"code":"import _classCallCheck from \"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _dec,\n    _class,\n    _jsxFileName = \"/Users/song/minesweeper/src/Minesweeper/components/Board/BoardSquare.js\";\n\nimport React from \"react\";\nimport CONST from '../../constants.js';\nimport { inject, observer } from \"mobx-react\";\nimport styles from './styles.js';\nimport gStyles from '../styles.js';\nimport stores from '../../stores';\nlet BoardSquare = (_dec = inject('board', 'square', 'mine', 'game'), _dec(_class = observer(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BoardSquare, _React$Component);\n\n  function BoardSquare() {\n    _classCallCheck(this, BoardSquare);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(BoardSquare).apply(this, arguments));\n  }\n\n  _createClass(BoardSquare, [{\n    key: \"render\",\n    value: function render() {\n      console.log('BoardSquare render');\n      const {\n        y,\n        x\n      } = this.props;\n      const {\n        minesAndHintsBoard\n      } = stores.board;\n      const {\n        isSquareRevealedBoard\n      } = this.props.board;\n      const {\n        revealSquare,\n        flagSquare\n      } = this.props.square;\n      const {\n        gameState,\n        detonatedMineCoordinates\n      } = this.props.game; // console.log('minesAndHintsBoard', minesAndHintsBoard);\n\n      if (Object.keys(isSquareRevealedBoard).length === 0) return null;\n      let square = {\n        isRevealed: isSquareRevealedBoard[y][x] === CONST.IS_REVEALED && minesAndHintsBoard[y][x] !== 0,\n        isZero: isSquareRevealedBoard[y][x] === CONST.IS_REVEALED && minesAndHintsBoard[y][x] === 0,\n        isDetonatedMine: gameState === CONST.MINE_DETONATED && minesAndHintsBoard[y][x] === CONST.IS_MINE && detonatedMineCoordinates.y === y && detonatedMineCoordinates.x === x,\n        isMine: gameState === CONST.MINE_DETONATED && minesAndHintsBoard[y][x] === CONST.IS_MINE,\n        isFlagged: isSquareRevealedBoard[y][x] === CONST.IS_FLAGGED\n      };\n      let style;\n\n      if (square.isZero) {\n        style = { ...styles.size,\n          ...styles.empty,\n          ...gStyles.image\n        };\n      } else if (square.isRevealed) {\n        style = { ...styles.size,\n          ...styles[`number${minesAndHintsBoard[y][x]}`],\n          ...gStyles.image\n        };\n      } else if (square.isDetonatedMine) {\n        style = { ...styles.size,\n          ...styles.detonatedMine,\n          ...gStyles.image\n        };\n      } else if (square.isMine) {\n        style = { ...styles.size,\n          ...styles.mine,\n          ...gStyles.image\n        };\n      } else if (square.isFlagged) {\n        style = { ...styles.size,\n          ...styles.flagged,\n          ...gStyles.image\n        };\n      } else {\n        style = { ...styles.size,\n          ...styles.blank,\n          ...gStyles.image\n        };\n      }\n\n      return React.createElement(\"div\", {\n        key: x,\n        style: style,\n        onClick: () => revealSquare(y, x),\n        onContextMenu: e => {\n          flagSquare(y, x);\n          e.preventDefault();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return BoardSquare;\n}(React.Component)) || _class) || _class);\nexport default BoardSquare;","map":{"version":3,"sources":["/Users/song/minesweeper/src/Minesweeper/components/Board/BoardSquare.js"],"names":["React","CONST","inject","observer","styles","gStyles","stores","BoardSquare","console","log","y","x","props","minesAndHintsBoard","board","isSquareRevealedBoard","revealSquare","flagSquare","square","gameState","detonatedMineCoordinates","game","Object","keys","length","isRevealed","IS_REVEALED","isZero","isDetonatedMine","MINE_DETONATED","IS_MINE","isMine","isFlagged","IS_FLAGGED","style","size","empty","image","detonatedMine","mine","flagged","blank","e","preventDefault","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CONST from '../../constants.js';\nimport {inject, observer} from \"mobx-react\";\nimport styles from './styles.js';\nimport gStyles from '../styles.js';\nimport stores from '../../stores';\n\n\n@inject('board', 'square', 'mine', 'game')\n@observer\nclass BoardSquare extends React.Component {\n\n    render() {\n        console.log('BoardSquare render')\n\n        const {y, x} = this.props;\n        const {minesAndHintsBoard} = stores.board;\n        const {isSquareRevealedBoard} = this.props.board;\n        const {revealSquare, flagSquare} = this.props.square;\n        const {gameState, detonatedMineCoordinates} = this.props.game;\n\n        // console.log('minesAndHintsBoard', minesAndHintsBoard);\n        if (Object.keys(isSquareRevealedBoard).length === 0) return null;\n\n        let square = {\n            isRevealed: isSquareRevealedBoard[y][x] === CONST.IS_REVEALED && minesAndHintsBoard[y][x] !== 0,\n            isZero: isSquareRevealedBoard[y][x] === CONST.IS_REVEALED && minesAndHintsBoard[y][x] === 0,\n            isDetonatedMine: gameState === CONST.MINE_DETONATED && minesAndHintsBoard[y][x] === CONST.IS_MINE && detonatedMineCoordinates.y === y && detonatedMineCoordinates.x === x,\n            isMine: gameState === CONST.MINE_DETONATED && minesAndHintsBoard[y][x] === CONST.IS_MINE ,\n            isFlagged: isSquareRevealedBoard[y][x] === CONST.IS_FLAGGED,\n        }\n\n        let style;\n\n        if (square.isZero) {\n\n            style = {...styles.size, ...styles.empty, ...gStyles.image}\n\n        } else if (square.isRevealed) {\n\n            style = {...styles.size, ...styles[`number${minesAndHintsBoard[y][x]}`], ...gStyles.image}\n\n        } else if (square.isDetonatedMine) {\n\n            style = {...styles.size, ...styles.detonatedMine, ...gStyles.image}\n\n        } else if (square.isMine) {\n\n            style = {...styles.size, ...styles.mine, ...gStyles.image}\n\n        } else if (square.isFlagged) {\n\n            style = {...styles.size, ...styles.flagged, ...gStyles.image}\n\n        } else {\n\n            style = {...styles.size, ...styles.blank, ...gStyles.image}\n\n        }\n\n        return <div\n            key={x}\n            style={style}\n            onClick={() => revealSquare(y, x)}\n            onContextMenu={e => {flagSquare(y, x); e.preventDefault()}}\n        />\n\n    }\n}\n\nexport default BoardSquare"]},"metadata":{},"sourceType":"module"}
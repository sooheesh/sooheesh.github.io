{"ast":null,"code":"import _objectSpread from\"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/song/minesweeper/node_modules/@babel/runtime/helpers/esm/inherits\";var _dec,_class;import React from\"react\";import CONST from'../../constants.js';import{inject,observer}from\"mobx-react\";import styles from'./styles.js';import gStyles from'../styles.js';import stores from'../../stores';var BoardSquare=(_dec=inject('board','square','mine','game'),_dec(_class=observer(_class=/*#__PURE__*/function(_React$Component){_inherits(BoardSquare,_React$Component);function BoardSquare(){_classCallCheck(this,BoardSquare);return _possibleConstructorReturn(this,_getPrototypeOf(BoardSquare).apply(this,arguments));}_createClass(BoardSquare,[{key:\"render\",value:function render(){console.log('BoardSquare render');var _this$props=this.props,y=_this$props.y,x=_this$props.x;var minesAndHintsBoard=stores.board.minesAndHintsBoard;var isSquareRevealedBoard=this.props.board.isSquareRevealedBoard;var _this$props$square=this.props.square,revealSquare=_this$props$square.revealSquare,flagSquare=_this$props$square.flagSquare;var _this$props$game=this.props.game,gameState=_this$props$game.gameState,detonatedMineCoordinates=_this$props$game.detonatedMineCoordinates;// console.log('minesAndHintsBoard', minesAndHintsBoard);\nif(Object.keys(isSquareRevealedBoard).length===0)return null;var square={isRevealed:isSquareRevealedBoard[y][x]===CONST.IS_REVEALED&&minesAndHintsBoard[y][x]!==0,isZero:isSquareRevealedBoard[y][x]===CONST.IS_REVEALED&&minesAndHintsBoard[y][x]===0,isDetonatedMine:gameState===CONST.MINE_DETONATED&&minesAndHintsBoard[y][x]===CONST.IS_MINE&&detonatedMineCoordinates.y===y&&detonatedMineCoordinates.x===x,isMine:gameState===CONST.MINE_DETONATED&&minesAndHintsBoard[y][x]===CONST.IS_MINE,isFlagged:isSquareRevealedBoard[y][x]===CONST.IS_FLAGGED};var style;if(square.isZero){style=_objectSpread({},styles.size,{},styles.empty,{},gStyles.image);}else if(square.isRevealed){style=_objectSpread({},styles.size,{},styles[\"number\".concat(minesAndHintsBoard[y][x])],{},gStyles.image);}else if(square.isDetonatedMine){style=_objectSpread({},styles.size,{},styles.detonatedMine,{},gStyles.image);}else if(square.isMine){style=_objectSpread({},styles.size,{},styles.mine,{},gStyles.image);}else if(square.isFlagged){style=_objectSpread({},styles.size,{},styles.flagged,{},gStyles.image);}else{style=_objectSpread({},styles.size,{},styles.blank,{},gStyles.image);}return React.createElement(\"div\",{key:x,style:style,onClick:function onClick(){return revealSquare(y,x);},onContextMenu:function onContextMenu(e){flagSquare(y,x);e.preventDefault();}});}}]);return BoardSquare;}(React.Component))||_class)||_class);export default BoardSquare;","map":{"version":3,"sources":["/Users/song/minesweeper/src/Minesweeper/components/Board/BoardSquare.js"],"names":["React","CONST","inject","observer","styles","gStyles","stores","BoardSquare","console","log","props","y","x","minesAndHintsBoard","board","isSquareRevealedBoard","square","revealSquare","flagSquare","game","gameState","detonatedMineCoordinates","Object","keys","length","isRevealed","IS_REVEALED","isZero","isDetonatedMine","MINE_DETONATED","IS_MINE","isMine","isFlagged","IS_FLAGGED","style","size","empty","image","detonatedMine","mine","flagged","blank","e","preventDefault","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CONST from '../../constants.js';\nimport {inject, observer} from \"mobx-react\";\nimport styles from './styles.js';\nimport gStyles from '../styles.js';\nimport stores from '../../stores';\n\n\n@inject('board', 'square', 'mine', 'game')\n@observer\nclass BoardSquare extends React.Component {\n\n    render() {\n        console.log('BoardSquare render')\n\n        const {y, x} = this.props;\n        const {minesAndHintsBoard} = stores.board;\n        const {isSquareRevealedBoard} = this.props.board;\n        const {revealSquare, flagSquare} = this.props.square;\n        const {gameState, detonatedMineCoordinates} = this.props.game;\n\n        // console.log('minesAndHintsBoard', minesAndHintsBoard);\n        if (Object.keys(isSquareRevealedBoard).length === 0) return null;\n\n        let square = {\n            isRevealed: isSquareRevealedBoard[y][x] === CONST.IS_REVEALED && minesAndHintsBoard[y][x] !== 0,\n            isZero: isSquareRevealedBoard[y][x] === CONST.IS_REVEALED && minesAndHintsBoard[y][x] === 0,\n            isDetonatedMine: gameState === CONST.MINE_DETONATED && minesAndHintsBoard[y][x] === CONST.IS_MINE && detonatedMineCoordinates.y === y && detonatedMineCoordinates.x === x,\n            isMine: gameState === CONST.MINE_DETONATED && minesAndHintsBoard[y][x] === CONST.IS_MINE ,\n            isFlagged: isSquareRevealedBoard[y][x] === CONST.IS_FLAGGED,\n        }\n\n        let style;\n\n        if (square.isZero) {\n\n            style = {...styles.size, ...styles.empty, ...gStyles.image}\n\n        } else if (square.isRevealed) {\n\n            style = {...styles.size, ...styles[`number${minesAndHintsBoard[y][x]}`], ...gStyles.image}\n\n        } else if (square.isDetonatedMine) {\n\n            style = {...styles.size, ...styles.detonatedMine, ...gStyles.image}\n\n        } else if (square.isMine) {\n\n            style = {...styles.size, ...styles.mine, ...gStyles.image}\n\n        } else if (square.isFlagged) {\n\n            style = {...styles.size, ...styles.flagged, ...gStyles.image}\n\n        } else {\n\n            style = {...styles.size, ...styles.blank, ...gStyles.image}\n\n        }\n\n        return <div\n            key={x}\n            style={style}\n            onClick={() => revealSquare(y, x)}\n            onContextMenu={e => {flagSquare(y, x); e.preventDefault()}}\n        />\n\n    }\n}\n\nexport default BoardSquare"]},"metadata":{},"sourceType":"module"}